<html>
<head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <script src="../js/weui/jquery-2.1.4.js"></script>
    <script src="../js/vue.min.js"></script>
    <link href="../css/weui/weui.min.css" rel="stylesheet" />
    <link href="../css/ionicons/ionicons.min.css" rel="stylesheet" />
    <style>
        div {
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
        }

        img {
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
        }

        .bg {
            /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#ffffff+0,ffffff+100&0.65+0,0+100 */
            background: -moz-linear-gradient(top, rgba(255,255,255,0.65) 0%, rgba(255,255,255,0) 100%); /* FF3.6-15 */
            background: -webkit-linear-gradient(top, rgba(255,255,255,0.65) 0%,rgba(255,255,255,0) 100%); /* Chrome10-25,Safari5.1-6 */
            background: linear-gradient(to bottom, rgba(255,255,255,0.65) 0%,rgba(255,255,255,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6ffffff', endColorstr='#00ffffff',GradientType=0 ); /* IE6-9 */
        }

        .itextB {
            filter: glow(color:blue, strength=2);
            color: white;
            font-weight: 900;
            text-shadow: 2px 2px 5px blue;
        }

        .itextG {
            filter: glow(color:blue, strength=2);
            color: white;
            font-weight: 900;
            text-shadow: 2px 2px 5px #dd7299;
        }
    </style>
</head>
<body style="background-color:#f8f8f8;margin:0;">
    <img src="../img/Guan/b.jpg" style="position:absolute;width:100%;height:100%;object-position:top;object-fit:cover;opacity:0.8;top:0;left:0;z-index:1" />
    <div style="width:100%;height:100%;position: absolute;top:0;left:0;z-index:2" class="bg">
        <div id="mybody" style="width:100%;">
            <div style="height:3%"></div>
            <div style="height:40%;width:100%;position:relative;padding:0 5%;display:flex;flex-direction:column;">
                <div style="flex:1;height:50%;position:relative;display:flex;">
                    <div style="flex:0 0 50%;text-align:center">
                        <img :src="Data.PaiPai.Img" style="position: relative;top: 50%;transform: translateY(-50%);height:20vh;width:20vh;object-fit:cover;border-radius:999em;" onerror="this.src='../img/icon/noimage_person.png'" />
                    </div>
                    <div style="flex:0 0 50%">
                        <p class="itextG" style="font-size: 5vw;line-height: 20vh;text-align:center">{{Data.PaiPai.Name}}</p>
                    </div>
                </div>

                <div style="flex:1;height:50%;position:relative;display:flex;">
                    <div style="flex:0 0 50%">
                        <p class="itextB" style="font-size: 5vw;line-height: 20vh;text-align:center">{{Data.BanBan? Data.BanBan.Name : "等待冠名中..."}}</p>
                    </div>
                    <div style="flex:0 0 50%;text-align:center">
                        <img :src="(Data.BanBan? Data.BanBan.Img : '')" style="position: relative;top: 50%;transform: translateY(-50%);height:20vh;width:20vh;object-fit:cover;border-radius:999em;" onerror="this.src='../img/icon/noimage_person.png'" />
                    </div>

                </div>

            </div>
            <div style="height:3%"></div>
            <div style="height:30%;width:90%;left:5%;position:relative;background-color:rgba(244, 244, 244,0.7);border-radius:20px">

            </div>
            <div style="width:100%;text-align:center">
                <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_primary">續冠</a>
                <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_primary">搶冠</a>
            </div>
            <div style="width:100%;text-align:center">
                <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_primary">宣言</a>

                <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_primary">拔冠</a>
                <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_primary">裝飾</a>

            </div>

        </div>
    </div>

    <script>
        var ttt;
        document.addEventListener("plusready", function () {
            var Server_Token = plus.storage.getItem("Server_Token");

            $.ajax({
                url: "https://api_m.7cplay.com/api/" + "GuanMin",
                type: 'get',
                headers: { "Server_Token": encodeURI(Server_Token) },
                success: function (rs) {
                    if (rs.result_status) {
                        ttt = new Vue({
                            el: '#mybody',
                            data: {
                                canshow: false,
                                Data: rs.result_content
                            },
                            methods: {
                                setting: function () {
                                    var ws = plus.webview.currentWebview();
                                    ws.setStyle({ mask: 'rgba(0,0,0,0.5)' });
                                    ws.addEventListener('maskClick', function () {
                                        if (plus.webview.getWebviewById("GuanMinSetting"))
                                            plus.webview.getWebviewById("GuanMinSetting").close();
                                        ws.setStyle({ mask: 'none' });

                                    }, false);


                                    var w = plus.webview.create('_www/Partition/MyGuanMinSetting.html', 'GuanMinSetting',
                                        {
                                            "top": "44px",
                                            "bottom": "0px",
                                            "cachemode": "default",
                                            "popGesture": "close",
                                            "userSelect": false,
                                            plusrequire: "ahead",
                                            background: "white",
                                            'titleNView': {
                                                // autoBackButton:true,
                                                'backgroundColor': '#dd7299',
                                                'type': "default",
                                                'titleColor': 'white',
                                                'titleText': "冠名設定",
                                                'buttons':  [
                                                    {
                                                        'text': '\uf217',
                                                        'float': 'right',
                                                        "fontSrc": "_www/css/ionicons/ionicons.ttf",

                                                    },
                                               

                                                ],
                                            },
                                        });
                                    w.addEventListener("close", function () {
                                        ws.setStyle({ mask: 'none' });
                                    })
                                    
                                }
                            },
                            mounted() {
                                var self = this;
                                var ws = plus.webview.currentWebview();
                                try {

                                    ws.setStyle({
                                        titleNView: {
                                            buttons: [
                                                { "type": "back", float: "left", colorPressed: "rgba(255,255,255,0.3)" },
                                                { "type": "menu" },
                                            ]
                                        }
                                    });

                                    ws.setTitleNViewButtonStyle(0, { onclick: function () { ws.close() } });
                                    ws.setTitleNViewButtonStyle(1, { onclick: function () { self.setting() } })


                                    var wsv = ws.getSubNViews();
                                    if (wsv) {
                                        if (wsv.length > 0) {
                                            var subNViews = ws.getSubNViews().find(e => e.__id__ == 'loadingsub');
                                            if (subNViews) {
                                                subNViews.close()
                                            }
                                        }
                                    }


                                } catch (e) {

                                }




                            }
                        })

                    } else {
                        alert(rs.result_message);
                    }
                },

            });

        })


    </script>
</body>
</html>

